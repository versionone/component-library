---
name: Publishing
menu: Guides
---

## Types of Versions

A major version is when a incompatible API change is made.

A minor version is when a functionality is added in a backwards-compatible manner.

A patch version is when a backward-compatible bug fix is made.

Version numbers should follow the pattern MAJOR.MINOR.PATCH

## Branching Strategy

There are 2 main branches, `master` and `next`.

`Master` is the current published version. Minor changes such as feature updates and defect fixes should get merged into `master`.

`Next` is the candidate branch of the next major version that has not yet been released. Breaking changes should be merged into `next`.

After changes have been made to `master`, `next` should be rebased on `master`.

> Pull Request process:
>
> - Open Pull Request in Github
> - Pull Request passes all the things
> - Use Github to merge Pull Request

## How to Publish

The library publishes to [npmjs.com](https://www.npmjs.com/package/@versionone/components).
Login is required, either with the VersionOne account or with an existing account that is linked to our org.

> Be sure to Login using `npm login` before attempting to publish

### Publishing Minor and Patch Versions

Feature branches should be merged into `master` before publishing from `master`.
Minor versions and patches can be published using `yarn lerna publish {minor|patch}`.

> Use `NODE_ENV=production yarn build` to build the production bundle and production doc sites.

### Publishing Major Versions

`Next` should be merged into `master` before publishing a major version, as it will become the new `master` branch after publishing.
Major versions can be published using `yarn lerna publish major`.

### Breaking Changes and Canary

When dealing with breaking changes, a canary release can be used to reduce the risks associated with publishing.
Changes will be rolled out to a subgroup before everyone in order to allow time for verification.

Feature branches should be merged into `next` before publishing canary.

Use `yarn lerna publish --canary {premajor}` to verify your published changes against a resource.
If another breaking change is required, `yarn lerna publish --canary {preminor|prepatch}` should be used.

## Publishing the Site

The docs site gets published on every Pull Request as well as every merge to master and next.

> You can find the build site in the Pull Request details

However, to publish a new release of the site, instead of a demo or build, you'll need to follow these steps:

1. Log into [netlify](https://www.netlify.com/).
2. Navigate to the `versionone-components` project
3. On project overview, scroll to "Production Deploys" and click on the desired production build.
4. Click the "Publish Deploy" button in the first box

## Trouble Shooting Common Issues

Oops, I published something wrong...how do a delete/backout a publish?

## Additional Resources

- https://github.com/lerna/lerna/tree/master/commands/publish#--canary
- https://semver.org/
